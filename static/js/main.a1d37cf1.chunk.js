(this["webpackJsonpnews-explorer-frontend"]=this["webpackJsonpnews-explorer-frontend"]||[]).push([[0],[,,,,,,function(e,t){e.exports={API_KEY:"b02901b7a4fa48e8aec2fe30bb52e6a6",BASE_URL:"https://api.aloha.students.nomoreparties.site",PROXY_URL:"https://nomoreparties.co/news/v2/everything",NUM_CARDS:3,NUM_ARTICLES:100}},,,,,,,,,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),s=n(19),r=n.n(s),i=(n(28),n(22)),o=n(2),l=n(3),u=(n(29),n(4)),d=(n(30),n(0));var p=function(e){return e.mobileWidth?Object(d.jsx)("div",{className:"header__navigation-container",children:e.children}):e.children},j=n.p+"static/media/menu-hamburger-icon_type_white.e36517e5.svg",h=n.p+"static/media/menu-hamburger-icon_type_black.f69aaff1.svg",b=n.p+"static/media/menu-close-icon.9981be0f.svg",m=n.p+"static/media/menu-logout-icon_type_white.e6a13ee8.svg",_=n.p+"static/media/menu-logout-icon_type_black.c7110248.svg";var O=function(e){var t=e.loggedIn,n=e.currentUser,s=e.onSignInClick,r=e.setIsNewsCardListOpen,i=e.setSearchKeyword,l=e.onSavedArticlesPage,O=e.onLogOut,g=Object(c.useState)(!1),f=Object(o.a)(g,2),v=f[0],x=f[1],N=Object(c.useState)(!1),w=Object(o.a)(N,2),S=w[0],k=w[1],A=Object(c.useState)(),y=Object(o.a)(A,2),C=y[0],E=y[1],I=Object(c.useState)(),L=Object(o.a)(I,2),U=L[0],R=L[1],P=Object(c.createRef)();function F(e){P.current&&!P.current.contains(e.target)&&x(!1)}function T(){x(!v)}function D(){x(!1),r(!1),i("")}return Object(c.useEffect)((function(){function e(){window.matchMedia("(max-width: 520px)").matches?k(!0):k(!1)}return e(),window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}})),Object(c.useEffect)((function(){!v&&l?E(h):v||l?v&&E(b):E(j)}),[v,l]),Object(c.useEffect)((function(){S?R(m):l?R(_):l||R(m)}),[S,l]),a.a.useEffect((function(e){return window.addEventListener("click",F),function(){return window.removeEventListener("click",F)}})),a.a.useEffect((function(){var e=function(e){"Escape"===e.key&&x(!1)};return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}}),[]),t?Object(d.jsxs)("header",{ref:P,className:"header ".concat(v?"header_mobile-menu-open":"header_mobile-menu-closed"),children:[Object(d.jsx)(u.b,{className:"header__logo ".concat(l&&"header__logo_saved-articles"," ").concat(v&&"header__logo_menu-open"),exact:!0,to:"/",onClick:D,children:"NewsExplorer"}),Object(d.jsx)("img",{className:"header__menu-icon",alt:"menu icon",src:C,onClick:T}),Object(d.jsx)("nav",{className:"header__navigation ".concat(S&&v?"header__navigation_type_mobile-active-logged-in":"header__navigation_type_mobile-inactive"),children:Object(d.jsxs)(p,{mobileWidth:S,children:[Object(d.jsx)(u.b,{className:"header__link-home ".concat(l&&"header_color_black"),activeClassName:l?"header__active_color_black":"header__active_color_white",exact:!0,to:"/",onClick:D,children:"Home"}),Object(d.jsx)(u.b,{className:"header__link-saved-articles ".concat(l&&"header_color_black"),activeClassName:l?"header__active_color_black":"header__active_color_white",to:"/saved-articles",onClick:D,children:"Saved articles"}),Object(d.jsxs)(u.b,{className:"header__log-button header__signout-button header__log-button_logged-in ".concat(l&&"header__log-button_saved-articles"),to:"",onClick:function(){D(),O()},children:[Object(d.jsx)("p",{className:"header__log-button-username",children:null===n||void 0===n?void 0:n.name}),Object(d.jsx)("img",{className:"header__log-button-logout-icon",src:U,alt:"logout icon"})]})]})})]}):Object(d.jsxs)("header",{ref:P,className:"header ".concat(v?"header_mobile-menu-open":"header_mobile-menu-closed"),children:[Object(d.jsx)(u.b,{className:"header__logo",exact:!0,to:"/",onClick:D,children:"NewsExplorer"}),Object(d.jsx)("img",{className:"header__menu-icon",alt:"menu icon",src:C,onClick:T}),Object(d.jsx)("div",{className:"header__navigation ".concat(S&&v?"header__navigation_type_mobile-active-logged-out":"header__navigation_type_mobile-inactive"),children:Object(d.jsxs)(p,{mobileWidth:S,children:[Object(d.jsx)(u.b,{className:"header__link-home",activeClassName:"header__active_color_white",exact:!0,to:"/",onClick:D,children:"Home"}),Object(d.jsx)(u.b,{className:"header__log-button header__signin-button header__log-button_logged-out",to:"",onClick:function(){s(),D()},children:"Sign In"})]})})]})};n(40);var g=function(e){var t=e.searchKeyword,n=e.setSearchKeyword,a=e.onSearch,s=Object(c.useState)(""),r=Object(o.a)(s,2),i=r[0],l=r[1],u=Object(c.useState)("Enter topic"),p=Object(o.a)(u,2),j=p[0],h=p[1];return Object(d.jsx)("section",{className:"search-hero",children:Object(d.jsxs)("div",{className:"search-hero__container",children:[Object(d.jsx)("h1",{className:"search-hero__title",children:"What's going on in the world?"}),Object(d.jsx)("p",{className:"search-hero__description",children:"Find the latest news on any topic and save them in your personal account."}),Object(d.jsxs)("form",{className:"search-hero__search-container",onSubmit:function(e){e.preventDefault(),i?a(t):h("Please enter a keyword")},children:[Object(d.jsx)("input",{className:"search-hero__input",placeholder:j,value:i,onChange:function(e){n(e.target.value),l(e.target.value)}}),Object(d.jsx)("button",{className:"search-hero__button",type:"submit",children:"Search"})]})]})})},f=(n(41),n.p+"static/media/author-image.8600ac89.jpg");var v=function(){return Object(d.jsxs)("section",{className:"about",children:[Object(d.jsx)("img",{src:f,alt:"avatar",className:"about__image"}),Object(d.jsxs)("div",{className:"about__description",children:[Object(d.jsx)("h2",{className:"about__header",children:"About the authors"}),Object(d.jsx)("p",{className:"about__paragraph",children:"This block describes the project author. Here you should indicate your name, what you do, and which development technologies you know."}),Object(d.jsx)("p",{className:"about__paragraph",children:"You can also talk about your experience with Practicum, what you learned there, and how you can help potential customers."})]})]})},x=(n(42),n.p+"static/media/facebook-icon.20ccdb52.svg"),N=n.p+"static/media/github-icon.6da6b782.svg";var w=function(){return Object(d.jsx)("footer",{className:"footer",children:Object(d.jsxs)("div",{className:"footer__content",children:[Object(d.jsx)("p",{className:"footer__copyright",children:"\xa9 2021 Supersite, Powered by News API"}),Object(d.jsxs)("nav",{className:"footer__nav",children:[Object(d.jsxs)("div",{className:"footer__links",children:[Object(d.jsx)(u.b,{to:"/",className:"footer__link",children:"Home"}),Object(d.jsx)("a",{href:"https://practicum.yandex.com/profile/web/",className:"footer__link",target:"_blank",rel:"noreferrer",children:"Practicum by Yandex"})]}),Object(d.jsxs)("div",{className:"footer__social",children:[Object(d.jsx)("a",{href:"https://github.com/cjmaret/news-explorer-frontend",target:"_blank",rel:"noreferrer",children:Object(d.jsx)("img",{src:N,alt:"Github icon",className:"footer__icon footer__icon_type_github"})}),Object(d.jsx)("a",{href:"https://www.facebook.com",target:"_blank",rel:"noreferrer",children:Object(d.jsx)("img",{src:x,alt:"Facebook icon",className:"footer__icon footer__icon_type_facebook"})})]})]})]})})};n(43);var S=function(e){return Object(d.jsx)("div",{className:"popup popup_type_".concat(e.name," ").concat(e.isOpen?"popup_open":""),onClick:function(t){t.target.classList.contains("popup_open")&&e.onClose()},children:Object(d.jsxs)("div",{className:"popup__wrapper",children:[Object(d.jsx)("button",{className:"popup__close-button popup__close-button_type_form",type:"button","aria-label":"Close popup",onClick:e.onClose}),Object(d.jsxs)("div",{className:"popup__form-container",children:[Object(d.jsx)("h2",{className:"popup__title",children:e.title}),Object(d.jsx)("form",{className:"popup__form popup__form_type_".concat(e.name),name:"form-".concat(e.name),onSubmit:e.onSubmit,noValidate:!0,children:e.children})]})]})})},k=n(11),A=n(8);var y=function(){var e=Object(c.useState)({}),t=Object(o.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)({}),r=Object(o.a)(s,2),i=r[0],l=r[1],u=Object(c.useState)(!1),d=Object(o.a)(u,2),p=d[0],j=d[1],h=Object(c.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];a(e),l(t),j(n)}),[a,l,j]);return{values:n,handleChange:function(e){var t=e.target,c=t.name,s=t.value;a(Object(A.a)(Object(A.a)({},n),{},Object(k.a)({},c,s))),l(Object(A.a)(Object(A.a)({},i),{},Object(k.a)({},c,t.validationMessage))),j(t.closest("form").checkValidity())},errors:i,isValid:p,resetForm:h}};var C=function(e){var t=e.isOpen,n=e.onClose,a=e.onLogInSubmit,s=e.onSignUpClick,r=e.hasError,i=y(),o=i.values,l=i.handleChange,u=i.errors,p=i.isValid,j=i.resetForm;return Object(c.useEffect)((function(){j()}),[t,j]),Object(d.jsxs)(S,{name:"login",title:"Sign in",isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault(),a(o.email,o.password)},children:[Object(d.jsxs)("div",{className:"popup__input-wrapper",children:[Object(d.jsx)("label",{className:"popup__input-label",htmlFor:"email-input",children:"Email"}),Object(d.jsx)("input",{type:"email",className:"popup__input",id:"email-login",autoComplete:"on",placeholder:"Enter email",name:"email",onChange:l,value:o.email||"",required:!0}),Object(d.jsx)("p",{id:"email-input-error",className:"popup__error",children:u.email||""})]}),Object(d.jsxs)("div",{className:"popup__input-wrapper",children:[Object(d.jsx)("label",{className:"popup__input-label",htmlFor:"password-input",children:"Password"}),Object(d.jsx)("input",{type:"password",className:"popup__input",id:"password-login",autoComplete:"on",placeholder:"Enter password",name:"password",onChange:l,value:o.password||"",minLength:"5",maxLength:"30",required:!0}),Object(d.jsx)("p",{id:"password-input-error",className:"popup__error",children:u.password||""})]}),r&&Object(d.jsx)("p",{className:"popup__error popup__error_type_form",children:"Incorrect email or password"}),Object(d.jsx)("button",{className:"popup__submit-button ".concat(p?"popup__submit-button_active":""),type:"submit","aria-label":"Sign in",disabled:!p,children:"Sign in"}),Object(d.jsxs)("p",{className:"popup__signin-signup",children:["or"," ",Object(d.jsx)("span",{className:"popup__link",onClick:s,children:"Sign up"})]})]})};var E=function(e){var t=e.isOpen,n=e.onClose,a=e.onRegisterSubmit,s=e.onSignInClick,r=e.hasError,i=y(),o=i.values,l=i.handleChange,u=i.errors,p=i.isValid,j=i.resetForm;return Object(c.useEffect)((function(){j()}),[t,j]),Object(d.jsxs)(S,{name:"sign-up",title:"Sign up",isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault(),a(o.email,o.password,o.name)},children:[Object(d.jsxs)("div",{className:"popup__input-wrapper",children:[Object(d.jsx)("label",{className:"popup__input-label",htmlFor:"email-input",children:"Email"}),Object(d.jsx)("input",{type:"email",className:"popup__input",id:"email-register",autoComplete:"off",placeholder:"Enter email",name:"email",value:o.email||"",onChange:l,required:!0}),Object(d.jsx)("p",{id:"email-input-error",className:"popup__error",children:u.email||""})]}),Object(d.jsxs)("div",{className:"popup__input-wrapper",children:[Object(d.jsx)("label",{className:"popup__input-label",htmlFor:"password-input",children:"Password"}),Object(d.jsx)("input",{type:"password",className:"popup__input",id:"password-register",autoComplete:"on",placeholder:"Enter password",name:"password",onChange:l,value:o.password||"",minLength:"5",maxLength:"30",required:!0}),Object(d.jsx)("p",{id:"password-input-error",className:"popup__error",children:u.password||""})]}),Object(d.jsxs)("div",{className:"popup__input-wrapper",children:[Object(d.jsx)("label",{className:"popup__input-label",htmlFor:"username-input",children:"Username"}),Object(d.jsx)("input",{type:"name",className:"popup__input",id:"username-register",autoComplete:"on",placeholder:"Enter username",name:"name",value:o.name||"",onChange:l,required:!0}),Object(d.jsx)("p",{id:"password-input-error",className:"popup__error",children:u.name||""})]}),r&&Object(d.jsx)("p",{className:"popup__error popup__error_type_form",children:"This email is unavailable"}),Object(d.jsx)("button",{className:"popup__submit-button ".concat(p?"popup__submit-button_active":""),type:"submit","aria-label":"Sign up",disabled:!p,children:"Sign up"}),Object(d.jsxs)("p",{className:"popup__signin-signup",children:["or"," ",Object(d.jsx)("span",{className:"popup__link",onClick:s,children:"Sign in"})]})]})};n(44),n(45);var I=function(e){var t,n=e.data,a=e.onSavedArticlesPage,s=e.loggedIn,r=e.onSaveArticleClick,i=e.onDeleteArticleClick,l=e.savedArticles,u=e.onSignInClick,p=Object(c.useState)(!1),j=Object(o.a)(p,2),h=j[0],b=j[1];function m(){var e=a?n.date:n.publishedAt,t=new Date(null===e||void 0===e?void 0:e.slice(0,10));return"".concat(["January","February","March","April","May","June","July","August","September","October","November","December"][t.getMonth()]," ").concat(t.getDate(),",  ").concat(t.getFullYear())}return Object(c.useEffect)((function(){l&&b(l.find((function(e){return e.title===n.title})))}),[n.title,l]),a?Object(d.jsxs)("div",{className:"news-card",children:[Object(d.jsx)("button",{className:"news-card__button news-card__button_delete",onClick:function(){return i(n)}}),Object(d.jsx)("div",{className:"news-card__tag news-card__tag_type_tooltip",children:"Remove from saved"}),Object(d.jsx)("div",{className:"news-card__tag news-card__tag_type_keyword",children:n.keyword}),Object(d.jsxs)("a",{href:n.link,className:"news-card__link",target:"_blank",rel:"noreferrer",children:[Object(d.jsx)("img",{src:n.image,alt:n.title,className:"news-card__image"}),Object(d.jsxs)("div",{className:"news-card__wrapper",children:[Object(d.jsx)("p",{className:"news-card__date",children:m()}),Object(d.jsx)("h2",{className:"news-card__title",children:n.title}),Object(d.jsx)("p",{className:"news-card__description",children:n.text}),Object(d.jsx)("p",{className:"news-card__source",children:n.source})]})]})]}):Object(d.jsxs)("div",{className:"news-card",children:[Object(d.jsx)("button",{className:"news-card__button news-card__button_save ".concat(s&&h?"news-card__button_save_active":""),onClick:function(){!function(e){h?i(e):r(e),b(!h)}(n),!s&&u()}}),!s&&Object(d.jsx)("div",{className:"news-card__tag news-card__tag_type_tooltip",children:"Sign in to save articles"}),Object(d.jsxs)("a",{href:n.url,className:"news-card__link",target:"_blank",rel:"noreferrer",children:[Object(d.jsx)("img",{src:n.urlToImage,alt:n.title,className:"news-card__image"}),Object(d.jsxs)("div",{className:"news-card__wrapper",children:[Object(d.jsx)("p",{className:"news-card__date",children:m()}),Object(d.jsx)("h2",{className:"news-card__title",children:n.title}),Object(d.jsx)("p",{className:"news-card__description",children:n.description}),Object(d.jsx)("p",{className:"news-card__source",children:null===(t=n.source)||void 0===t?void 0:t.name})]})]})]})},L=n(6);var U=function(e){var t=e.onSavedArticlesPage,n=e.loggedIn,a=e.cards,s=e.savedArticles,r=e.displayedCards,i=e.setDisplayedCards,l=e.onSaveArticleClick,u=e.onDeleteArticleClick,p=e.savedCardsArray,j=e.setSavedCardsArray,h=e.onSignInClick,b=Object(c.useState)(3),m=Object(o.a)(b,2),_=m[0],O=m[1],g=Object(c.useState)(!1),f=Object(o.a)(g,2),v=f[0],x=f[1];return Object(c.useEffect)((function(){t||i(null===a||void 0===a?void 0:a.slice(0,3))}),[a,t,i]),Object(c.useEffect)((function(){t&&j(s)}),[t,s,j]),Object(c.useEffect)((function(){(null===r||void 0===r?void 0:r.length)<(null===a||void 0===a?void 0:a.length)?x(!1):x(!0)}),[null===r||void 0===r?void 0:r.length,null===a||void 0===a?void 0:a.length]),t?Object(d.jsx)("section",{className:"news-card-list news-card-list_saved-articles",children:Object(d.jsx)("div",{className:"news-card-list__container",children:Object(d.jsx)("ul",{className:"news-card-list__card-grid news-card-list__card-grid_saved-articles",children:null===p||void 0===p?void 0:p.map((function(e){return Object(d.jsx)("li",{className:"news-card-list__card",children:Object(d.jsx)(I,{data:e,onSavedArticlesPage:t,loggedIn:n,onDeleteArticleClick:u,savedArticles:s})},e._id)}))})})}):Object(d.jsx)("section",{className:"news-card-list",children:Object(d.jsxs)("div",{className:"news-card-list__container",children:[Object(d.jsx)("h3",{className:"news-card-list__title",children:"Search results"}),Object(d.jsx)("ul",{className:"news-card-list__card-grid",children:null===r||void 0===r?void 0:r.map((function(e,c){return Object(d.jsx)("li",{className:"news-card-list__card",children:Object(d.jsx)(I,{data:e,onSavedArticlesPage:t,loggedIn:n,onSaveArticleClick:l,onDeleteArticleClick:u,savedArticles:s,onSignInClick:h})},c)}))}),!t&&!v&&Object(d.jsx)("button",{className:"news-card-list__show-more-button",onClick:function(){i(a.slice(0,_+L.NUM_CARDS)),O(_+L.NUM_CARDS)},children:"Show more"})]})})};n(46);var R=function(e){var t=e.currentUser,n=e.savedArticles,a=Object(c.useState)([]),s=Object(o.a)(a,2),r=s[0],i=s[1];return Object(c.useEffect)((function(){var e=n.map((function(e){return e.keyword}));e.map((function(e){return e.charAt(0).toUpperCase()+e.substr(1)}));var t=e.reduce((function(e,t){return e[t]=(e[t]||0)+1,e}),{}),c=Object.keys(t).sort((function(e,n){return t[n]-t[e]}));i(c)}),[n]),Object(d.jsx)("section",{className:"saved",children:Object(d.jsxs)("div",{className:"saved__content",children:[Object(d.jsx)("p",{className:"saved__title",children:"Saved articles"}),Object(d.jsxs)("h1",{className:"saved__heading",children:[t.name,", you have ",n.length," saved articles"]}),Object(d.jsxs)("p",{className:"saved__keywords",children:["By keywords:"," ",Object(d.jsx)("span",{className:"saved__keywords-bold",children:r.length>3?"".concat(r[0],", ").concat(r[1],", and ").concat(r.length-2," others"):r.join(", ")})]})]})})};n(47);var P=function(){return Object(d.jsx)("section",{className:"preloader",children:Object(d.jsxs)("div",{className:"preloader__container",children:[Object(d.jsx)("img",{className:"preloader__circle",src:"data:image/png;base64,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",alt:"preloader circle"}),Object(d.jsx)("p",{className:"preloader__description",children:"Searching for news..."})]})})},F=(n(48),n.p+"static/media/no-results-image.5661906d.svg");var T=function(e){var t=e.hasError;return Object(d.jsx)("section",{className:"no-results",children:Object(d.jsxs)("div",{className:"no-results__container",children:[Object(d.jsx)("img",{className:"no-results__image",src:F,alt:"sad magnifying glass"}),Object(d.jsx)("h3",{className:"no-results__title",children:"Nothing found"}),Object(d.jsx)("p",{className:"no-results__description",children:t?"Sorry, something went wrong during the request. There may be a connection issue or the server may be down. Please try again later.":"Sorry, but nothing matched your search terms"})]})})},D=n(23),J=["children","loggedIn"];var V=function(e){var t=e.children,n=e.loggedIn,c=Object(D.a)(e,J);return Object(d.jsx)(l.b,Object(A.a)(Object(A.a)({},c),{},{children:n?t:Object(d.jsx)(l.a,{exact:!0,to:"/"})}))};var B=function(e){return Object(d.jsx)("div",{className:"popup popup_type_success ".concat(e.isOpen?"popup_open":""),onClick:function(t){t.target.classList.contains("popup_open")&&e.onClose()},children:Object(d.jsxs)("div",{className:"popup__wrapper",children:[Object(d.jsx)("button",{className:"popup__close-button popup__close-button_type_form",type:"button","aria-label":"Close popup",onClick:e.onClose}),Object(d.jsxs)("div",{className:"popup__form-container",children:[Object(d.jsx)("h2",{className:"popup__title",children:"Registration successfully completed!"}),Object(d.jsx)("p",{className:"popup__signin-link",onClick:e.onSignInClick,children:"Sign in"})]})]})})},z=a.a.createContext(),K=n(13),M=n(14),X=new(function(){function e(t){var n=t.baseUrl,c=t.headers;Object(K.a)(this,e),this._baseUrl=n,this._headers=c}return Object(M.a)(e,[{key:"_returnRes",value:function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}},{key:"getCurrentUser",value:function(e){var t=this;return fetch(this._baseUrl+"/users/me",{headers:{authorization:"Bearer ".concat(e),"Content-Type":"application/json"},method:"GET"}).then((function(e){return t._returnRes(e)}))}},{key:"getArticles",value:function(e){var t=this;return fetch(this._baseUrl+"/articles",{headers:{authorization:"Bearer ".concat(e),"Content-Type":"application/json"},method:"GET"}).then((function(e){return t._returnRes(e)}))}},{key:"saveArticle",value:function(e,t,n){var c=this,a=e.title,s=e.description,r=e.publishedAt,i=e.url,o=e.urlToImage,l=e.source.name,u=t.charAt(0).toUpperCase()+t.slice(1);return fetch(this._baseUrl+"/articles",{headers:{authorization:"Bearer ".concat(n),"Content-Type":"application/json"},method:"POST",body:JSON.stringify({keyword:u,title:a,text:s,date:r,source:l,link:i,image:o})}).then((function(e){return c._returnRes(e)}))}},{key:"deleteArticle",value:function(e,t){var n=this;return fetch(this._baseUrl+"/articles/"+e,{headers:{authorization:"Bearer ".concat(t),"Content-Type":"application/json"},method:"DELETE"}).then((function(e){return n._returnRes(e)}))}}]),e}())({baseUrl:L.BASE_URL}),G=new Date,Q=new Date(G.getFullYear(),G.getMonth(),G.getDate()-7),Y=new(function(){function e(t){var n=t.baseUrl,c=t.headers;Object(K.a)(this,e),this._returnRes=function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))},this._baseUrl=n,this._headers=c}return Object(M.a)(e,[{key:"searchArticles",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"?q=").concat(e,"&from=").concat(Q.toISOString(),"&to=").concat(G.toISOString(),"&language=en&sortBy=relevancy&pageSize=").concat(L.NUM_ARTICLES,"&apiKey=").concat(L.API_KEY)).then((function(e){return t._returnRes(e)})).then((function(e){return e.articles}))}}]),e}())({baseUrl:L.PROXY_URL,headers:{"Content-Type":"X-Api-Key"}});function q(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}var W=function(){var e=Object(l.g)(),t=Object(c.useState)({}),n=Object(o.a)(t,2),a=n[0],s=n[1],r=Object(c.useState)(localStorage.getItem("token")),u=Object(o.a)(r,2),p=u[0],j=u[1],h=Object(c.useState)([]),b=Object(o.a)(h,2),m=b[0],_=b[1],f=Object(c.useState)(!1),x=Object(o.a)(f,2),N=x[0],S=x[1],k=Object(c.useState)(!1),A=Object(o.a)(k,2),y=A[0],I=A[1],F=Object(c.useState)(!1),D=Object(o.a)(F,2),J=D[0],K=D[1],M=Object(c.useState)(!1),G=Object(o.a)(M,2),Q=G[0],W=G[1],Z=Object(c.useState)(!1),H=Object(o.a)(Z,2),$=H[0],ee=H[1],te=Object(c.useState)([]),ne=Object(o.a)(te,2),ce=ne[0],ae=ne[1],se=Object(c.useState)(!1),re=Object(o.a)(se,2),ie=re[0],oe=re[1],le=Object(c.useState)(!1),ue=Object(o.a)(le,2),de=ue[0],pe=ue[1],je=Object(c.useState)(!1),he=Object(o.a)(je,2),be=he[0],me=he[1],_e=Object(c.useState)(!1),Oe=Object(o.a)(_e,2),ge=Oe[0],fe=Oe[1],ve=Object(l.h)().pathname.substring(1),xe=Object(c.useState)(!1),Ne=Object(o.a)(xe,2),we=Ne[0],Se=Ne[1],ke=Object(c.useState)([]),Ae=Object(o.a)(ke,2),ye=Ae[0],Ce=Ae[1],Ee=Object(c.useState)([]),Ie=Object(o.a)(Ee,2),Le=Ie[0],Ue=Ie[1],Re=Object(c.useState)([]),Pe=Object(o.a)(Re,2),Fe=Pe[0],Te=Pe[1];function De(e){var t;de?t=e._id:ye.find((function(t){return t.link===e.url}))?t=ye.find((function(t){return t.link===e.url}))._id:console.log("that card doesnt exist!");X.deleteArticle(t,p).then((function(e){Ce(ye.filter((function(t){return t._id!==e.article._id})))})).catch((function(e){return console.log(e)}))}function Je(){Se(!1),W(!0),ee(!1),me(!1)}function Ve(){W(!1),ee(!1),me(!1)}return Object(c.useEffect)((function(){p&&function(e){return fetch("".concat(L.BASE_URL,"/users/me"),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then((function(e){return q(e)})).then((function(e){return e}))}(p).then((function(t){S(!0),e.push("/")})).catch((function(e){return console.log(e)}))}),[e,p]),Object(c.useEffect)((function(){X.getCurrentUser(p).then((function(e){s(e.user)})).catch((function(e){return console.log(e)}))}),[p]),Object(c.useEffect)((function(){X.getArticles(p).then((function(e){Ce(e.articles)})).catch((function(e){return console.log(e)}))}),[p]),Object(c.useEffect)((function(){["saved-articles"].includes(ve)?pe(!0):pe(!1)}),[ve]),Object(c.useEffect)((function(){var e=function(e){"Escape"===e.key&&Ve()};return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}}),[]),Object(d.jsx)(z.Provider,{value:a,children:Object(d.jsxs)("div",{className:"page",children:[Object(d.jsx)(O,{loggedIn:N,currentUser:a,setLoggedIn:S,onSignInClick:Je,setIsNewsCardListOpen:oe,setSearchKeyword:ae,onSavedArticlesPage:de,onLogOut:function(){S(!1),localStorage.removeItem("token"),e.push("/")}}),Object(d.jsxs)(l.d,{children:[Object(d.jsxs)(l.b,{exact:!0,path:"/",children:[Object(d.jsx)(g,{onSearch:function(e){oe(!1),I(!0),Y.searchArticles(e).then((function(e){oe(!0),_(e),0===e.length?fe(!1):fe(!0)})).catch((function(e){console.log(e),Se(!0)})).finally((function(){I(!1)}))},searchKeyword:ce,setSearchKeyword:ae,setIsNewsCardListOpen:oe}),ge&&ie&&Object(d.jsx)(U,{onSavedArticlesPage:de,loggedIn:N,cards:m,savedArticles:ye,onSaveArticleClick:function(e){ye.find((function(t){return t.title===e.title}))?console.log("thats already saved!"):X.saveArticle(e,ce,p).then((function(e){e&&(Ce((function(t){return[].concat(Object(i.a)(t),[e.article])})),console.log("article saved!"))})).catch((function(e){return console.log(e)}))},onDeleteArticleClick:De,displayedCards:Le,setDisplayedCards:Ue,onSignInClick:Je}),y&&Object(d.jsx)(P,{}),!ge&&!y&&ie&&Object(d.jsx)(T,{hasError:we}),Object(d.jsx)(v,{})]}),Object(d.jsxs)(V,{path:"/saved-articles",loggedIn:N,children:[Object(d.jsx)(R,{currentUser:a,savedArticles:ye}),Object(d.jsx)(U,{onSavedArticlesPage:de,loggedIn:N,savedArticles:ye,setSavedArticles:Ce,token:p,displayedCards:Le,setDisplayedCards:Ue,savedCardsArray:Fe,setSavedCardsArray:Te,onDeleteArticleClick:De})]})]}),Object(d.jsx)(C,{isOpen:Q,onClose:Ve,onSignUpClick:function(){Se(!1),ee(!0),W(!1)},onLogInSubmit:function(t,n){(function(e,t){return fetch("".concat(L.BASE_URL,"/signin"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}).then((function(e){return q(e)})).then((function(e){return e.token?(localStorage.setItem("token",e.token),e):void 0}))})(t,n).then((function(t){t.token&&(localStorage.setItem("token",t.token),j(t.token),Se(!1),S(!0),W(!1),e.push("/"))})).catch((function(e){console.log("Incorrect email or password: ".concat(e.message)),Se(!0)}))},hasError:we}),Object(d.jsx)(E,{isOpen:$,onClose:Ve,onSignInClick:Je,onRegisterSubmit:function(e,t,n){(function(e,t,n){return fetch("".concat(L.BASE_URL,"/signup"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:e,password:t,name:n})}).then((function(e){return q(e)})).then((function(e){return e}))})(e,t,n).then((function(e){e?(K(!0),Se(!1),ee(!1),me(!0)):(K(!1),Se(!0))})).catch((function(e){console.log("This email is unavailable: ".concat(e.message)),Se(!0)}))},hasError:we}),Object(d.jsx)(B,{isOpen:be,onClose:Ve,onSignInClick:Je,isRegistered:J}),Object(d.jsx)(w,{})]})})},Z=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,50)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),c(e),a(e),s(e),r(e)}))};var H=Object(l.i)((function(e){var t=e.history;return Object(c.useEffect)((function(){var e=t.listen((function(){window.scrollTo(0,0)}));return function(){e()}}),[t]),null}));r.a.render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsxs)(u.a,{children:[Object(d.jsx)(H,{}),Object(d.jsx)(W,{})]})}),document.getElementById("root")),Z()}],[[49,1,2]]]);
//# sourceMappingURL=main.a1d37cf1.chunk.js.map